(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{358:function(n,e,t){"use strict";t.r(e);var r=t(43),s=Object(r.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('function reportableClassDecorator<T extends { new (...args: any[]): {} }>(constructor: T) {\n  return class extends constructor {\n    reportingURL = "http://www...";\n  };\n}\n\n@reportableClassDecorator\nclass BugReport {\n  type = "report";\n  title: string;\n\n  constructor(t: string) {\n    this.title = t;\n  }\n}\n')])])]),t("p",[n._v("最近在看TS关于decorator的文档时看到上面这样一段，其中这部分语法非常奇怪：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("{ new (...args: any[]): {} }\n")])])]),t("p",[n._v("稍微查阅了一下资料，作如下总结。")]),n._v(" "),t("p",[n._v("首先，可以在一个interface中定义所谓的 "),t("em",[n._v("construct signature")]),n._v("，官方示例代码如下：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('interface ClockConstructor {\n  new (hour: number, minute: number): ClockInterface;\n}\n \ninterface ClockInterface {\n  tick(): void;\n}\n \nconst Clock: ClockConstructor = class Clock implements ClockInterface {\n  constructor(h: number, m: number) {}\n  tick() {\n    console.log("beep beep");\n  }\n};\n \nlet clock = new Clock(12, 17);\nclock.tick();\n')])])]),t("p",[n._v("这里为什么要把"),t("code",[n._v("ClockConstructor")]),n._v("和"),t("code",[n._v("ClockInterface")]),n._v("分开写，而不是都合并到一个interface里，是关乎到一个class存在static side和instance side两方面信息以及"),t("code",[n._v("implements")]),n._v("关键字只检查instance side信息的原因，详细内容官方文档有专门讲述所以不再赘述。")]),n._v(" "),t("p",[n._v("于是，奇怪的语法看起来比较像带有construct signature的匿名inline interface，就是下面这个意思：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('interface AnonymousInlineInterface {\n  new (...args: any[]): {};\n}\n\nfunction reportableClassDecorator<T extends AnonymousInlineInterface>(constructor: T) {\n  return class extends constructor {\n    reportingURL = "http://www...";\n  };\n}\n')])])]),t("p",[n._v("这里的return type是"),t("code",[n._v("{}")]),n._v("没有什么实际的意义，相当要求construct signature返回类型是一个空的interface，也就是没有任何要求，就是下面这个意思：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('interface Dummy {}\n\ninterface AnonymousInlineInterface {\n  new (...args: any[]): Dummy;\n}\n\nfunction reportableClassDecorator<T extends AnonymousInlineInterface>(constructor: T) {\n  return class extends constructor {\n    reportingURL = "http://www...";\n  };\n}\n')])])])])}),[],!1,null,null,null);e.default=s.exports}}]);